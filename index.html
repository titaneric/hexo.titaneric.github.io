<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">










  <meta name="google-site-verification" content="RQtmPJShc9hc9WFJsoPCJy1PN9k4Yc6lm6Oz9iYNyM0">

















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=6.7.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.7.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.7.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.7.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.7.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Playground">
<meta property="og:url" content="http://titaneric.github.io/index.html">
<meta property="og:site_name" content="Playground">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Playground">






  <link rel="canonical" href="http://titaneric.github.io/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Playground</title>
  




  <script async src="//www.googletagmanager.com/gtag/js?id=UA-132691301-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-132691301-1');
  </script>









  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Playground</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Just my little stuff here</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    
  
  
  
  

  

  <a href="https://github.com/titaneric" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill: #222; color: #fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/03/19/Combination-Sum/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/19/Combination-Sum/" class="post-title-link" itemprop="url">Combination-Sum</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-19 12:17:12 / Modified: 04:45:07" itemprop="dateCreated datePublished" datetime="2019-03-19T12:17:12+00:00">2019-03-19</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Combination-Sum-39"><a href="#Combination-Sum-39" class="headerlink" title="Combination Sum (#39)"></a><a href="https://leetcode.com/problems/combination-sum/" target="_blank" rel="noopener">Combination Sum (#39)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Given a <strong>set</strong> of candidate numbers (<code>candidates</code>) <strong>(without duplicates)</strong> and a target number (<code>target</code>), find all unique combinations in candidates where the candidate numbers sums to <code>target</code>.</p>
<p>The <strong>same</strong> repeated number may be chosen from candidates unlimited number of times.</p>
<p>Note:</p>
<p>All numbers (including <code>target</code>) will be positive integers.<br>The solution set must not contain duplicate combinations.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Input: candidates = [2,3,6,7], target = 7,</span><br><span class="line">A solution set is:</span><br><span class="line">[</span><br><span class="line">  [7],</span><br><span class="line">  [2,2,3]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: candidates = [2,3,5], target = 8,</span><br><span class="line">A solution set is:</span><br><span class="line">[</span><br><span class="line">  [2,2,2,2],</span><br><span class="line">  [2,3,3],</span><br><span class="line">  [3,5]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><hr>
<h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><p>Again, use the backtracking to solve it.</p>
<p>Parameters:<br><code>solution set</code>, <code>solution</code>, <code>begin</code>, <code>target</code>, <code>candidates</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">If the incoming `target` is zero, save the `solution` to `solution set` and return.</span><br><span class="line"></span><br><span class="line">Otherwise, iterate all `candidate` from `begin` to end of `candidates`:</span><br><span class="line">    If `candidate` is less or equal than `target`:</span><br><span class="line">        add `candidate` to `solution`</span><br><span class="line">        update `target` to `target` - `candidate`</span><br><span class="line">        update `begin` to index of `candidate`</span><br><span class="line">        backtracking with updated parameter `solution` and `target`</span><br><span class="line">        pop `candidate` from `solution`</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Input: candidates = [2,3,6,7], target = 7</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-0"></div>

<p>Initial</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-1"></div>

<p>2 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 2.<br>Update <code>begin</code> to index of 2.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">5</span></span><br><span class="line">solution = [<span class="number">2</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-2"></div>

<p>2 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 2.<br>Update <code>begin</code> to index of 2.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">3</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-3"></div>

<p>2 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 2.<br>Update <code>begin</code> to index of 2.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">1</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-4"></div>

<p>None of candidate are less or equal to target, return to last callee.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">1</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-5"></div>

<p>Pop last candidate from <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">3</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-6"></div>

<p>3 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 3.<br>Update <code>begin</code> to index of 3.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">0</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">solution_set = []</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-7"></div>

<p><code>target</code> is zero,  put <code>solution</code> to <code>solution set</code>.<br>Return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">0</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-8"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">3</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-9"></div>

<p>From rest of <code>candidates</code>, none of candidate &lt;= <code>target</code>.<br>Return to last callee.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">3</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">2</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-10"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">5</span></span><br><span class="line">solution = [<span class="number">2</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-11"></div>

<p>3 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 3.<br>Update <code>begin</code> to index of 3.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">2</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-12"></div>

<p>For rest of <code>candidate</code>, none of them &lt;= <code>target</code>.<br>Return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">2</span></span><br><span class="line">solution = [<span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-13"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">5</span></span><br><span class="line">solution = [<span class="number">2</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-14"></div>

<p>For rest of <code>candidate</code>, none of them &lt;= <code>target</code>.<br>Return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">5</span></span><br><span class="line">solution = [<span class="number">2</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-15"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">0</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-16"></div>

<p>3 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 3.<br>Update <code>begin</code> to index of 3.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">4</span></span><br><span class="line">solution = [<span class="number">3</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-17"></div>

<p>None of candidates &lt;= <code>target</code>.<br>Return</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">4</span></span><br><span class="line">solution = [<span class="number">3</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-18"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">1</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-19"></div>

<p>6 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 6.<br>Update <code>begin</code> to index of 6.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">2</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">2</span></span><br><span class="line">target = <span class="number">1</span></span><br><span class="line">solution = [<span class="number">6</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-20"></div>

<p>None of candidate &lt;= <code>target</code>.<br>Return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">2</span></span><br><span class="line">target = <span class="number">1</span></span><br><span class="line">solution = [<span class="number">6</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-21"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">2</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-22"></div>

<p>7 &lt;= <code>target</code>, put in <code>solution</code>.<br>Update <code>target</code> to <code>target</code> - 7.<br>Update <code>begin</code> to index of 7.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">begin = <span class="number">3</span></span><br><span class="line">target = <span class="number">0</span></span><br><span class="line">solution = [<span class="number">7</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-23"></div>

<p><code>target</code> is zero, save the <code>solution</code> to <code>solution_set</code>.<br>Return.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">3</span></span><br><span class="line">target = <span class="number">0</span></span><br><span class="line">solution = [<span class="number">7</span>]</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">7</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-24"></div>

<p>Pop last element of <code>solution</code>.<br>Resume <code>target</code>.<br>Resume <code>begin</code>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">3</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">7</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-25"></div>

<p>Have run all of candidate, terminated.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">begin = <span class="number">3</span></span><br><span class="line">target = <span class="number">7</span></span><br><span class="line">solution = []</span><br><span class="line">solution_set = [[<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>],[<span class="number">7</span>]]</span><br><span class="line">candidate = [<span class="number">2</span>, <span class="number">3</span>, <span class="number">6</span> ,<span class="number">7</span>]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><p><code>`</code>python<br>class Solution:<br>    def combinationSum(self, candidates, target):<br>        “””<br>        :type candidates: List[int]<br>        :type target: int<br>        :rtype: List[List[int]]<br>        “””<br>        combination_list = []<br>        self.back_tracking(combination_list, [], 0, target, candidates)<br>        return combination_list</p>
<pre><code>def back_tracking(self, combination_list, combines, begin, target, candidates):
    if target == 0:
        combination_list.append(combines.copy())
        return
    for i in range(begin, len(candidates)):
        num = candidates[i]
        if num &lt;= target:
            combines.append(num)
            self.back_tracking(combination_list, combines, i, target - num, candidates)
            combines.pop()
</code></pre><p><code>`</code><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rankdir=LR;
    } 

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script><textarea id="graphviz-1-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    "[2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-1-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-1").append(element)  });</script><textarea id="graphviz-2-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-2-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-2").append(element)  });</script><textarea id="graphviz-3-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
        "[2,2]"->"[2,2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank3->"[2,2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-3-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-3").append(element)  });</script><textarea id="graphviz-4-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
        "[2,2]"->"[2,2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank3->"[2,2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-4-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-4").append(element)  });</script><textarea id="graphviz-5-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-5-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-5").append(element)  });</script><textarea id="graphviz-6-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
        "[2,2]"->"[2,2,3]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank3->"[2,2,3]" [style=invis];
        rankdir=LR;
    } 
    "[2,2,3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-6-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-6").append(element)  });</script><textarea id="graphviz-7-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
        "[2,2]"->"[2,2,3]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank3->"[2,2,3]" [style=invis];
        rankdir=LR;
    } 
    "[2,2,3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-7-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-7").append(element)  });</script><textarea id="graphviz-8-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-8-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-8").append(element)  });</script><textarea id="graphviz-9-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,2]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,2]" [style=invis];
        rankdir=LR;
    } 
    "[2,2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-9-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-9").append(element)  });</script><textarea id="graphviz-10-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    "[2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-10-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-10").append(element)  });</script><textarea id="graphviz-11-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,3]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,3]" [style=invis];
        rankdir=LR;
    } 
    "[2,3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-11-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-11").append(element)  });</script><textarea id="graphviz-12-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        "[2]"->"[2,3]"
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->"[2,3]" [style=invis];
        rankdir=LR;
    } 
    "[2,3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-12-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-12").append(element)  });</script><textarea id="graphviz-13-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    "[2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-13-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-13").append(element)  });</script><textarea id="graphviz-14-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[2]" [style=invis];
        rankdir=LR;
    } 
    "[2]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-14-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-14").append(element)  });</script><textarea id="graphviz-15-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-15-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-15").append(element)  });</script><textarea id="graphviz-16-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[3]" [style=invis];
        rankdir=LR;
    } 
    "[3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-16-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-16").append(element)  });</script><textarea id="graphviz-17-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[3]" [style=invis];
        rankdir=LR;
    } 
    "[3]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-17-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-17").append(element)  });</script><textarea id="graphviz-18-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-18-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-18").append(element)  });</script><textarea id="graphviz-19-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[6]" [style=invis];
        rankdir=LR;
    } 
    "[6]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-19-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-19").append(element)  });</script><textarea id="graphviz-20-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[6]" [style=invis];
        rankdir=LR;
    } 
    "[6]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-20-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-20").append(element)  });</script><textarea id="graphviz-21-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-21-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-21").append(element)  });</script><textarea id="graphviz-22-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[7]" [style=invis];
        rankdir=LR;
    } 
    "[7]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-22-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-22").append(element)  });</script><textarea id="graphviz-23-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->"[7]" [style=invis];
        rankdir=LR;
    } 
    "[7]" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-23-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-23").append(element)  });</script><textarea id="graphviz-24-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-24-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-24").append(element)  });</script><textarea id="graphviz-25-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-25-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-25").append(element)  });</script></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/03/13/OSDI-lab2/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/13/OSDI-lab2/" class="post-title-link" itemprop="url">OSDI-lab2</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-13 15:04:11" itemprop="dateCreated datePublished" datetime="2019-03-13T15:04:11+00:00">2019-03-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="OSDI-lab-II"><a href="#OSDI-lab-II" class="headerlink" title="OSDI lab II"></a>OSDI lab II</h1><h2 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h2><ul>
<li>Learn how to build a customized BIOS and show some message on system startup.</li>
<li>Understand kernel booting flow and boot a ‘hello world’ program.</li>
<li>Learn how to use BIOS interrupt call to do I/O tasks.</li>
<li>Learn how to modify linux-0.11 bootsect.s and the build system to create a multiboot kernel image.</li>
</ul>
<hr>
<h2 id="Lab2-1-Build-SEABIOS-add-some-message-before-system-startup"><a href="#Lab2-1-Build-SEABIOS-add-some-message-before-system-startup" class="headerlink" title="Lab2.1 - Build SEABIOS, add some message before system startup"></a>Lab2.1 - Build SEABIOS, add some message before system startup</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://git.seabios.org/seabios.git seabios</span><br><span class="line"><span class="built_in">cd</span> seabios/</span><br><span class="line">make menuconfig</span><br><span class="line">make</span><br></pre></td></tr></table></figure>
<p>Print message in <code>enable_vga_console</code> function in <code>src/bootsplash.c</code>.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span></span><br><span class="line">enable_vga_console(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">    dprintf(<span class="number">1</span>, <span class="string">"Turning on vga text mode console\n"</span>);</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">bregs</span> <span class="title">br</span>;</span> </span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Enable VGA text mode */</span></span><br><span class="line">    <span class="built_in">memset</span>(&amp;br, <span class="number">0</span>, <span class="keyword">sizeof</span>(br));</span><br><span class="line">    br.ax = <span class="number">0x0003</span>;</span><br><span class="line">    call16_int10(&amp;br);</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"This is OSDI lab2.\n"</span>);</span><br><span class="line">    <span class="comment">// Write to screen.</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"SeaBIOS (version %s)\n"</span>, VERSION);</span><br><span class="line">    display_uuid();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Use the qemu <code>-bios</code> option to load customized BIOS.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-i386 -m 16M -boot a -fda Image -hda osdi.img -bios seabios/out/bios.bin</span><br></pre></td></tr></table></figure></p>
<p>Because the customized BIOS is part of our lab, so I push it to new repo and add the <strong>submodule</strong> to <code>osdi</code>.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule add bios-url bios-in-osdi-path</span><br></pre></td></tr></table></figure></p>
<p>After that, I can update the customized BIOS even though we develop the BIOS and OSDI at different repo using the following command.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git submodule update bios-name</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Lab2-2-Add-image-before-system-startup"><a href="#Lab2-2-Add-image-before-system-startup" class="headerlink" title="Lab2.2 - Add image before system startup"></a>Lab2.2 - Add image before system startup</h2><p>We want to load the image when BIOS is loading.</p>
<p>Firstly, we want to find which function can help us to do that.<br>There is a function called <code>enable_bootsplash</code> @ <code>src/bootsplash.c</code>.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span></span><br><span class="line">enable_bootsplash(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!CONFIG_BOOTSPLASH)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="comment">/* splash picture can be bmp or jpeg file */</span></span><br><span class="line">    dprintf(<span class="number">3</span>, <span class="string">"Checking for bootsplash\n"</span>);</span><br><span class="line">    u8 type = <span class="number">0</span>; <span class="comment">/* 0 means jpg, 1 means bmp, default is 0=jpg */</span></span><br><span class="line">    <span class="keyword">int</span> filesize;</span><br><span class="line">    u8 *filedata = romfile_loadfile(<span class="string">"bootsplash.jpg"</span>, &amp;filesize);</span><br><span class="line">    <span class="keyword">if</span> (!filedata) &#123;</span><br><span class="line">        filedata = romfile_loadfile(<span class="string">"bootsplash.bmp"</span>, &amp;filesize);</span><br><span class="line">        <span class="keyword">if</span> (!filedata)</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        type = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>This function will check the <code>CONFIG_BOOTSPLASH</code> and bootsplash image.</p>
<p>Secondly, we find that the <code>enable_bootsplash</code> will be called by <code>interactive_bootmenu</code> @ <code>src/boot.c</code>.<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Show IPL option menu.</span></span><br><span class="line"><span class="keyword">void</span></span><br><span class="line">interactive_bootmenu(<span class="keyword">void</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// XXX - show available drives?</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"CONFIG_BOOTMENU: %d\n"</span>, CONFIG_BOOTMENU);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"show-boot-menu: %d\n"</span>, romfile_loadint(<span class="string">"etc/show-boot-menu"</span>, <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">if</span> (! CONFIG_BOOTMENU || !romfile_loadint(<span class="string">"etc/show-boot-menu"</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (get_keystroke(<span class="number">0</span>) &gt;= <span class="number">0</span>)</span><br><span class="line">        ;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> *bootmsg = romfile_loadfile(<span class="string">"etc/boot-menu-message"</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="keyword">int</span> menukey = romfile_loadint(<span class="string">"etc/boot-menu-key"</span>, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s"</span>, bootmsg ?: <span class="string">"\nPress ESC for boot menu.\n\n"</span>);</span><br><span class="line">    <span class="built_in">free</span>(bootmsg);</span><br><span class="line"></span><br><span class="line">    u32 menutime = romfile_loadint(<span class="string">"etc/boot-menu-wait"</span>, DEFAULT_BOOTMENU_WAIT);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"menutime: %d\n"</span>, menutime);</span><br><span class="line">    enable_bootsplash();</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure></p>
<p>It seems that it is the function to provide the boot menu (i.e, booting from which boot device).<br>This function will also check the <code>CONFIG_BOOTMENU</code> and the file <code>etc/show-boot-menu</code>.<br>If we print the config before the first if condition, we will find that </p>
<p><img src="https://i.imgur.com/J0M7dAD.png" alt=""></p>
<p>Therefore, the <code>CONFIG_BOOTMENU</code> is 1 but <code>etc/show-boot-menu</code> is 0, so the <code>interactive_bootmenu</code> will return early without executing the rest of code including the <code>enable_bootsplash</code> method.</p>
<p>After did some <a href="https://github.com/qemu/qemu/blob/master/docs/specs/fw_cfg.txt" target="_blank" rel="noopener">researches</a>, qemu provide an option <code>-fw_cfg</code> to provide some file as</p>
<ul>
<li><code>-fw_cfg [name=]&lt;item_name&gt;,file=&lt;path&gt;</code>. or</li>
<li><code>-fw_cfg [name=]&lt;item_name&gt;,string=&lt;string&gt;</code></li>
</ul>
<p>So I revise the qemu command to<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-i386 -m 16M -boot a -fda Image -hda ../osdi.img -bios seabios/out/bios.bin -fw_cfg name=etc/show-boot-menu,string=1</span><br></pre></td></tr></table></figure></p>
<p>After that, the result became</p>
<p><img src="https://i.imgur.com/v1dMZr5.png" alt=""></p>
<p>It did enter the rest of code and ready to execute boot menu, and because the <code>enable_bootsplash</code> will check the image before load it, and we provide the bootsplash image as following.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-i386 -m 16M -boot a -fda Image -hda ../osdi.img -bios seabios/out/bios.bin -fw_cfg name=etc/show-boot-menu,string=1 -fw_cfg name=bootsplash.jpg,file=bootsplash.jpg</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.imgur.com/hwRLd1Z.png" alt=""></p>
<p>It work!</p>
<p>My friends also found that another qemu option <a href="https://manpages.debian.org/jessie/qemu-system-x86/qemu-system-x86_64.1.en.html" target="_blank" rel="noopener"><code>-boot</code></a> provide the same functionality.<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qemu-system-i386 -m 16M -boot order=a,menu=on,splash=bootsplash.jpg  -fda Image -hda ../osdi.img -bios seabios/out/bios.bin</span><br></pre></td></tr></table></figure></p>
<p>Which will be more clever and elegant!</p>
<h2 id="Lab2-3-Boot-the-hello-world-program"><a href="#Lab2-3-Boot-the-hello-world-program" class="headerlink" title="Lab2.3 - Boot the hello world program"></a>Lab2.3 - Boot the hello world program</h2><p>In this time, we will revise the kernel image structure and boot the given <code>hello</code>.<br>We will revise the image from<br><img src="https://i.imgur.com/DjL3gC2.png" alt=""><br>to<br><img src="https://i.imgur.com/biwIcIa.png" alt=""></p>
<h3 id="Makefile"><a href="#Makefile" class="headerlink" title="Makefile"></a>Makefile</h3><p>Of course we will revise the Makefile and build.sh.</p>
<p>Firstly, put the <code>hello.s</code> to <code>boot</code>, and revise the <code>boot/Makefile</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">all: bootsect hello setup</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">hello: hello.s</span><br><span class="line">	@$(AS) -o hello.o hello.s</span><br><span class="line">	@$(LD) $(LDFLAGS) -o hello hello.o</span><br><span class="line">	@objcopy -R .pdr -R .comment -R.note -S -O binary hello</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">	@rm -f bootsect bootsect.o setup setup.o head.o hello hello.o</span><br></pre></td></tr></table></figure></p>
<p>Just add new rule for hello and remember to clean its object file when executing <code>make clean</code>.</p>
<p>Secondly, revise the <code>Makefile</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">Image: boot/bootsect boot/hello boot/setup tools/system</span><br><span class="line">	@cp -f tools/system system.tmp</span><br><span class="line">	@strip system.tmp</span><br><span class="line">	@objcopy -O binary -R .note -R .comment system.tmp tools/kernel</span><br><span class="line">	@chmod +x tools/build.sh</span><br><span class="line">	@tools/build.sh boot/bootsect boot/hello boot/setup tools/kernel Image $(ROOT_DEV)</span><br><span class="line">	@rm system.tmp</span><br><span class="line">	@rm tools/kernel -f</span><br><span class="line">	@sync</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>Update the Image <em>prerequisites</em> and add hello to the <code>tools/build.sh</code>parameter.</p>
<p>Thirdly, revise the <code>tools/build.sh</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># build.sh -- a shell version of build.c for the new bootsect.s &amp; setup.s</span><br><span class="line"># author: falcon &lt;wuzhangjin@gmail.com&gt;</span><br><span class="line"># update: 2008-10-10</span><br><span class="line"></span><br><span class="line">bootsect=$1</span><br><span class="line">hello=$2</span><br><span class="line">setup=$3</span><br><span class="line">system=$4</span><br><span class="line">IMAGE=$5</span><br><span class="line">root_dev=$6</span><br><span class="line"></span><br><span class="line"># Set the biggest sys_size</span><br><span class="line"># Changes from 0x20000 to 0x30000 by tigercn to avoid oversized code.</span><br><span class="line">SYS_SIZE=$((0x3000*16))</span><br><span class="line"></span><br><span class="line"># set the default &quot;device&quot; file for root image file</span><br><span class="line">if [ -z &quot;$root_dev&quot; ]; then</span><br><span class="line">	DEFAULT_MAJOR_ROOT=3</span><br><span class="line">	DEFAULT_MINOR_ROOT=1</span><br><span class="line">else</span><br><span class="line">	DEFAULT_MAJOR_ROOT=$&#123;root_dev:0:2&#125;</span><br><span class="line">	DEFAULT_MINOR_ROOT=$&#123;root_dev:2:3&#125;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"># Write bootsect (512 bytes, one sector) to stdout</span><br><span class="line">[ ! -f &quot;$bootsect&quot; ] &amp;&amp; echo &quot;there is no bootsect binary file there&quot; &amp;&amp; exit -1</span><br><span class="line">dd if=$bootsect bs=512 count=1 of=$IMAGE 2&gt;&amp;1 &gt;/dev/null</span><br><span class="line"></span><br><span class="line"># Write hello(512bytes, one sector) to stdout</span><br><span class="line">[ ! -f &quot;$hello&quot; ] &amp;&amp; echo &quot;there is no hello binary file there&quot; &amp;&amp; exit -1</span><br><span class="line">dd if=$hello seek=1 bs=512 count=1 of=$IMAGE 2&gt;&amp;1 &gt;/dev/null</span><br><span class="line"></span><br><span class="line"># Write setup(4 * 512bytes, four sectors) to stdout</span><br><span class="line">[ ! -f &quot;$setup&quot; ] &amp;&amp; echo &quot;there is no setup binary file there&quot; &amp;&amp; exit -1</span><br><span class="line">dd if=$setup seek=2 bs=512 count=4 of=$IMAGE 2&gt;&amp;1 &gt;/dev/null</span><br><span class="line"></span><br><span class="line"># Write system(&lt; SYS_SIZE) to stdout</span><br><span class="line">[ ! -f &quot;$system&quot; ] &amp;&amp; echo &quot;there is no system binary file there&quot; &amp;&amp; exit -1</span><br><span class="line">system_size=`wc -c $system |cut -d&quot; &quot; -f1`</span><br><span class="line">[ $system_size -gt $SYS_SIZE ] &amp;&amp; echo &quot;the system binary is too big&quot; &amp;&amp; exit -1</span><br><span class="line">dd if=$system seek=6 bs=512 count=$((2888-1-1-4)) of=$IMAGE 2&gt;&amp;1 &gt;/dev/null</span><br><span class="line"></span><br><span class="line"># Set &quot;device&quot; for the root image file</span><br><span class="line">echo -ne &quot;\x$DEFAULT_MINOR_ROOT\x$DEFAULT_MAJOR_ROOT&quot; | dd ibs=1 obs=1 count=2 seek=508 of=$IMAGE conv=notrunc  2&gt;&amp;1 &gt;/dev/null</span><br></pre></td></tr></table></figure>
<p>Remember that at the <code>Makefile</code>, we put the hello as the second parameter, and we also need to update the parameter index of rest.</p>
<p>Link the <code>hello</code> to <code>Image</code>, <strong>order matter!</strong><br>We want to put the bootsect, hello, setup and system, so we must follow this order.</p>
<p>The hello contain 512 bytes and occupied 1 sector, that is the <code>bs</code> and <code>count</code> option for.</p>
<p>So far, we insert the hello to new image, and we are ready to boot it.</p>
<h3 id="How-OS-boot"><a href="#How-OS-boot" class="headerlink" title="How OS boot?"></a>How OS boot?</h3><p>At <code>boot/bootsect.s</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">	ljmp    $BOOTSEG, $_start</span><br><span class="line">_start:</span><br><span class="line">	mov	$BOOTSEG, %ax</span><br><span class="line">	mov	%ax, %ds</span><br><span class="line">	mov	$INITSEG, %ax</span><br><span class="line">	mov	%ax, %es</span><br><span class="line">	mov	$256, %cx</span><br><span class="line">	sub	%si, %si</span><br><span class="line">	sub	%di, %di</span><br><span class="line">	rep</span><br><span class="line">	movsw </span><br><span class="line">	ljmp	$INITSEG, $go</span><br></pre></td></tr></table></figure>
<ol>
<li>Long jump to <code>$BOOTSEG:$_start</code> when OS is loaded by BIOS.</li>
<li>Put <code>$BOOTSEG</code> to <code>%ds</code>, <code>$INITSEG</code> to <code>%es</code> and 256 to <code>%cx</code>.</li>
<li>Zero the <code>%si</code> and <code>%di</code>.</li>
<li><p>Repeat <code>movsw</code> until <code>%cx</code> is zero (i.e. copy itself to from <code>$BOOTSEG</code> to <code>$INITSEG</code>, total size is 512 bytes).</p>
<p> Because the counter of <code>rep</code> will decrease by 1 after executed, so the <code>movw</code> will execute 256 times!</p>
<p> <code>movw</code> will move one word (2 bytes in 16-bits CPU) from <code>%ds:%si</code> to <code>%es:%di</code>.</p>
<p> First step:</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%ds = $BOOTSEG</span><br><span class="line">%si = 0</span><br><span class="line">%es = $INITSEG</span><br><span class="line">%di = 0</span><br><span class="line"></span><br><span class="line"># Copy from $BOOTSEG:0 to $INITSEG:0</span><br><span class="line">movw</span><br></pre></td></tr></table></figure>
<p> Second step:<br> Because the <code>%si</code> and <code>%di</code> will increase by 2 (bytes, one word in 16-bits CPU) after done it. So</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">%ds = $BOOTSEG</span><br><span class="line">%si = 2</span><br><span class="line">%es = $INITSEG</span><br><span class="line">%di = 2</span><br><span class="line"></span><br><span class="line"># Copy from $BOOTSEG:2 to $INITSEG:2</span><br><span class="line">movw</span><br></pre></td></tr></table></figure>
<p> After 256 times, the <code>$BOOTSEG:0</code> - <code>$BOOTSEG:256</code> will copy to  <code>$INITSEG:0</code> - <code>$INITSEG:256</code>. That’s <code>bootsect</code> itself!</p>
</li>
<li><p>Long jump to <code>$INITSEG:$go</code>.</p>
</li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">go:	mov	%cs, %ax 			# after long jump, %cs become $INITSEG</span><br><span class="line">	mov	%ax, %ds</span><br><span class="line">	mov	%ax, %es</span><br><span class="line"># put stack at 0x9ff00.</span><br><span class="line">	mov	%ax, %ss</span><br><span class="line">	mov	$0xFF00, %sp		# arbitrary value &gt;&gt;512</span><br></pre></td></tr></table></figure>
<ol>
<li>Move <code>$INITSEG</code> to <code>%ds</code>, <code>%es</code> and <code>%ss</code>.<br> After long jump, the <code>%cs</code> will store the last segment it jump, that is <code>$INITSEG</code>.</li>
<li>Put the top of stack <code>%sp</code> to a huge address.</li>
</ol>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># load the setup-sectors directly after the bootblock.</span><br><span class="line"># Note that &apos;es&apos; is already set up.</span><br><span class="line">load_setup:</span><br><span class="line">	mov	$0x0000, %dx		# drive 0, head 0</span><br><span class="line">	mov	$0x0002, %cx		# sector 2, track 0</span><br><span class="line">	mov	$0x0200, %bx		# address = 512, in INITSEG</span><br><span class="line">	.equ    AX, 0x0200+SETUPLEN</span><br><span class="line">	mov     $AX, %ax		# service 2, nr of sectors</span><br><span class="line">	int	$0x13			# read it</span><br><span class="line">	jnc	ok_load_setup		# ok - continue</span><br><span class="line">	mov	$0x0000, %dx</span><br><span class="line">	mov	$0x0000, %ax		# reset the diskette</span><br><span class="line">	int	$0x13</span><br><span class="line">	jmp	load_setup</span><br></pre></td></tr></table></figure>
<ol>
<li>In this time, we want to read drive 0 (floppy), from 0 cylinder, 0 track, from <code>2</code>‘th sector and read <code>SETUPLEN</code> sectors, 0 head to memory based on address <code>$INITSEG:$0x0200</code>. (i.e. load the setup in memory)</li>
<li>If successfully read it, <code>%cf</code> will not be set, so that <code>jnc    ok_load_setup</code> will jump to <code>ok_load_setup</code>.</li>
<li>Otherwise, reset the disk and try again.</li>
</ol>
<hr>
<p><strong>Reference:</strong></p>
<h4 id="Drive-table"><a href="#Drive-table" class="headerlink" title="Drive table:"></a><a href="https://en.wikipedia.org/wiki/INT_13H" target="_blank" rel="noopener">Drive table</a>:</h4><table>
<thead>
<tr>
<th>Register value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>DL = 00h</td>
<td>1st floppy disk ( “drive A:” )</td>
</tr>
<tr>
<td>DL = 01h</td>
<td>2nd floppy disk ( “drive B:” )</td>
</tr>
<tr>
<td>DL = 80h</td>
<td>1st hard disk</td>
</tr>
<tr>
<td>DL = 81h</td>
<td>2nd hard disk</td>
</tr>
<tr>
<td>DL = e0h</td>
<td>CD/DVD</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="INT-13h-AH-02h-Read-Sectors-From-Drive"><a href="#INT-13h-AH-02h-Read-Sectors-From-Drive" class="headerlink" title="INT 13h, AH = 02h: Read Sectors From Drive"></a>INT 13h, AH = 02h: <a href="https://en.wikipedia.org/wiki/INT_13H" target="_blank" rel="noopener">Read Sectors From Drive</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>02h</td>
</tr>
<tr>
<td>AL</td>
<td>Sectors To Read Count</td>
</tr>
<tr>
<td>CH</td>
<td>Cylinder</td>
</tr>
<tr>
<td>CL</td>
<td>Sector</td>
</tr>
<tr>
<td>DH</td>
<td>Head</td>
</tr>
<tr>
<td>DL</td>
<td>Drive</td>
</tr>
<tr>
<td>ES:BX</td>
<td>Buffer Address Pointer</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>CF</td>
<td>Set On Error, Clear If No Error</td>
</tr>
<tr>
<td>AH</td>
<td>Return Code</td>
</tr>
<tr>
<td>AL</td>
<td>Actual Sectors Read Count</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="INT-13h-AH-00h-Reset-Disk-System"><a href="#INT-13h-AH-00h-Reset-Disk-System" class="headerlink" title="INT 13h, AH = 00h: Reset Disk System"></a>INT 13h, AH = 00h: <a href="https://en.wikipedia.org/wiki/INT_13H" target="_blank" rel="noopener">Reset Disk System</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>00h</td>
</tr>
<tr>
<td>DL</td>
<td>Drive (bit 7 set means reset both hard and floppy disks)</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>CF</td>
<td>Set on error</td>
</tr>
<tr>
<td>AH</td>
<td>Return Code</td>
</tr>
</tbody>
</table>
<hr>
<p>We can imitate the procedure to…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">	.equ HELLOLEN, 1		# nr of hello-sectors</span><br><span class="line">	.equ HELLOSEG, 0x0100	# hello starts here</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">go:	mov	%cs, %ax 			# after long jump, %cs become $INITSEG</span><br><span class="line">	mov	%ax, %ds</span><br><span class="line">	mov	%ax, %es</span><br><span class="line"># put stack at 0x9ff00.</span><br><span class="line">	mov	%ax, %ss</span><br><span class="line">	mov	$0xFF00, %sp		# arbitrary value &gt;&gt;512</span><br><span class="line">    </span><br><span class="line"># Lab 2</span><br><span class="line">load_hello:</span><br><span class="line">   mov	$0x0000, %dx		# drive 0, head 0</span><br><span class="line">   mov	$0x0002, %cx		# sector 2, track 0</span><br><span class="line">   mov $HELLOSEG, %ax		# segment</span><br><span class="line">   mov %ax, %es</span><br><span class="line">   mov	$0x0000, %bx		# offset, address = 0x0100</span><br><span class="line">   .equ    AX, 0x0200+HELLOLEN</span><br><span class="line">   mov     $AX, %ax			# service 2, nr of sectors</span><br><span class="line">   int	$0x13				# read it</span><br><span class="line">   jnc	ok_load_hello		# ok - continue</span><br><span class="line">   mov	$0x0000, %dx</span><br><span class="line">   mov	$0x0000, %ax		# reset the diskette</span><br><span class="line">   int	$0x13</span><br><span class="line">   jmp	load_hello</span><br><span class="line"></span><br><span class="line">ok_load_hello:</span><br><span class="line">   ljmp $HELLOSEG, $0 # Jump to hello</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p><img src="https://i.imgur.com/ejJFhn5.png" alt=""></p>
<p>It works!</p>
<hr>
<h2 id="Lab2-4-Multiboot-support"><a href="#Lab2-4-Multiboot-support" class="headerlink" title="Lab2.4 - Multiboot support"></a>Lab2.4 - Multiboot support</h2><p>In this experiment, you need to implement a simple keyboard character reader that when user:</p>
<ul>
<li><p>Press ‘1’, it boots the linux-0.11 Image(just like lab1).</p>
</li>
<li><p>Press ‘2’, it boots the hello world program.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">go:	mov	%cs, %ax 			# after long jump, %cs become $INITSEG</span><br><span class="line">	mov	%ax, %ds</span><br><span class="line">	mov	%ax, %es</span><br><span class="line"># put stack at 0x9ff00.</span><br><span class="line">	mov	%ax, %ss</span><br><span class="line">	mov	$0xFF00, %sp		# arbitrary value &gt;&gt;512</span><br><span class="line">    </span><br><span class="line">boot_menu:</span><br><span class="line">   # Print some inane message</span><br><span class="line">   mov	$0x03, %ah		# read cursor pos</span><br><span class="line">   xor	%bh, %bh		# page number</span><br><span class="line">   int	$0x10</span><br><span class="line">   </span><br><span class="line">   mov	$21, %cx		# string length</span><br><span class="line">   mov	$0x000D, %bx		# page 0, attribute 7 (normal)</span><br><span class="line">   #lea	option, %bp</span><br><span class="line">   mov     $option, %bp		# point to message</span><br><span class="line">   mov	$0x1301, %ax		# write string, move cursor</span><br><span class="line">   int	$0x10</span><br><span class="line"></span><br><span class="line">   mov $0x00, %ah</span><br><span class="line">   int $0x16</span><br><span class="line"></span><br><span class="line">   cmp $49, %al				# 1 ascii</span><br><span class="line">   je load_setup</span><br><span class="line">   cmp $50, %al				# 2 ascii</span><br><span class="line">   je load_hello</span><br><span class="line">   jmp boot_menu</span><br><span class="line"></span><br><span class="line">   ...</span><br><span class="line"> </span><br><span class="line">msg1:</span><br><span class="line">	.byte 13,10</span><br><span class="line">	.ascii &quot;Loading system ...&quot;</span><br><span class="line">	.byte 13,10,13,10</span><br><span class="line"></span><br><span class="line">option:</span><br><span class="line">	.byte 13,10</span><br><span class="line">	.ascii &quot;1) linux, 2) hello&quot;</span><br><span class="line">	.byte 13,10,13,10</span><br></pre></td></tr></table></figure>
<ol>
<li>We locate the cursor.</li>
<li>Print the string to show the boot option.</li>
<li>Read the keyboard</li>
<li>Goto <code>load_setup</code> if pressing 1, goto <code>load_hello</code> if pressing 2.</li>
<li>Otherwise, go to <code>boot_menu</code> again.</li>
</ol>
<hr>
<p><strong>Reference:</strong></p>
<h4 id="INT-10h-AH-03h-Get-cursor-position-and-shape"><a href="#INT-10h-AH-03h-Get-cursor-position-and-shape" class="headerlink" title="INT 10h, AH = 03h: Get cursor position and shape"></a>INT 10h, AH = 03h: <a href="https://en.wikipedia.org/wiki/INT_10H" target="_blank" rel="noopener">Get cursor position and shape</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>03h</td>
</tr>
<tr>
<td>BH</td>
<td>Page Number</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AX = 0</td>
<td></td>
</tr>
<tr>
<td>CH</td>
<td>Start scan line</td>
</tr>
<tr>
<td>CL</td>
<td>End scan line</td>
</tr>
<tr>
<td>DH</td>
<td>Row</td>
</tr>
<tr>
<td>DL</td>
<td>Column</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="INT-10h-AH-13h-Write-string"><a href="#INT-10h-AH-13h-Write-string" class="headerlink" title="INT 10h, AH = 13h: Write string"></a>INT 10h, AH = 13h: <a href="https://en.wikipedia.org/wiki/INT_10H" target="_blank" rel="noopener">Write string</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>13h</td>
</tr>
<tr>
<td>AL</td>
<td>Write mode</td>
</tr>
<tr>
<td>BH</td>
<td>Page Number</td>
</tr>
<tr>
<td>BL</td>
<td>Color</td>
</tr>
<tr>
<td>CX</td>
<td>String length</td>
</tr>
<tr>
<td>DH</td>
<td>Row</td>
</tr>
<tr>
<td>DL</td>
<td>Column</td>
</tr>
<tr>
<td>ES:EP</td>
<td>Offset of string</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="INT-16h-AH-00h-Read-keystroke"><a href="#INT-16h-AH-00h-Read-keystroke" class="headerlink" title="INT 16h, AH = 00h: Read keystroke"></a>INT 16h, AH = 00h: <a href="https://en.wikipedia.org/wiki/INT_16H" target="_blank" rel="noopener">Read keystroke</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>00h</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>Scan code of the key pressed down</td>
</tr>
<tr>
<td>AL</td>
<td>ASCII character of the button pressed</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="BIOS-color"><a href="#BIOS-color" class="headerlink" title="BIOS color:"></a><a href="https://en.wikipedia.org/wiki/BIOS_color_attributes" target="_blank" rel="noopener">BIOS color</a>:</h4><table>
<thead>
<tr>
<th>Hex</th>
<th>Color</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Black</td>
</tr>
<tr>
<td>1</td>
<td>Blue</td>
</tr>
<tr>
<td>2</td>
<td>Green</td>
</tr>
<tr>
<td>3</td>
<td>Cyan</td>
</tr>
<tr>
<td>4</td>
<td>Red</td>
</tr>
<tr>
<td>5</td>
<td>Magenta</td>
</tr>
<tr>
<td>6</td>
<td>Brown</td>
</tr>
<tr>
<td>7</td>
<td>Light Gray</td>
</tr>
<tr>
<td>8</td>
<td>Dark Gray</td>
</tr>
<tr>
<td>9</td>
<td>Light Blue</td>
</tr>
<tr>
<td>A</td>
<td>Light Green</td>
</tr>
<tr>
<td>B</td>
<td>Light Cyan</td>
</tr>
<tr>
<td>C</td>
<td>Light Red</td>
</tr>
<tr>
<td>D</td>
<td>Light Magenta</td>
</tr>
<tr>
<td>E</td>
<td>Yellow</td>
</tr>
<tr>
<td>F</td>
<td>White</td>
</tr>
</tbody>
</table>
<hr>
<h4 id="ASCII"><a href="#ASCII" class="headerlink" title="ASCII:"></a><a href="https://en.wikipedia.org/wiki/ASCII" target="_blank" rel="noopener">ASCII</a>:</h4><table>
<thead>
<tr>
<th>Dec</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>10</td>
<td>Line feed (\n)</td>
</tr>
<tr>
<td>49</td>
<td>1</td>
</tr>
<tr>
<td>50</td>
<td>2</td>
</tr>
</tbody>
</table>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">load_setup:</span><br><span class="line">	mov	$0x0000, %dx		# drive 0, head 0</span><br><span class="line">	mov	$0x0003, %cx		# sector 3, track 0</span><br><span class="line">	mov	$0x0200, %bx		# address = 512, in INITSEG</span><br><span class="line">	.equ    AX, 0x0200+SETUPLEN</span><br><span class="line">	mov     $AX, %ax		# service 2, nr of sectors</span><br><span class="line">	int	$0x13			# read it</span><br><span class="line">	jnc	ok_load_setup		# ok - continue</span><br><span class="line">	mov	$0x0000, %dx</span><br><span class="line">	mov	$0x0000, %ax		# reset the diskette</span><br><span class="line">	int	$0x13</span><br><span class="line">	jmp	load_setup</span><br></pre></td></tr></table></figure>
<p><code>load_hello</code> remain the same, but the setup is located at 3rd sector, so we revise the <code>%cl</code> to 0x03.</p>
<p>It seems that all work are done. However, after making and run it.</p>
<p><img src="https://i.imgur.com/KB682J1.png" alt=""></p>
<p>Hello runs pretty well.</p>
<p>After press 1, I want to load the setup, but the OS begin to reboot continuously.</p>
<p>It seems that we didn’t run the <code>ljmp    $SETUPSEG, $0</code>.<br>Thus, we must continue to trace the rest of code.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ok_load_setup:</span><br><span class="line"></span><br><span class="line"># Get disk drive parameters, specifically nr of sectors/track</span><br><span class="line"></span><br><span class="line">	mov	$0x00, %dl</span><br><span class="line">	mov	$0x0800, %ax		# AH=8 is get drive parameters</span><br><span class="line">	int	$0x13</span><br><span class="line">	mov	$0x00, %ch</span><br><span class="line">	#seg cs</span><br><span class="line">	mov	%cx, %cs:sectors+0	# %cs means sectors is in %cs</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<ol>
<li>Get sectors of track.</li>
<li>Set <code>%ch</code> (<code>%cx[15:8]</code>) to <code>0x00</code>.</li>
<li>Because we boot from floppy (<code>%dl</code> = 0), and its maximum sectors per track will not exceed 256 (18 sectors per track normally), so <code>%cx[7:6]</code> will be <code>0</code>.</li>
<li>Move <code>%cx</code> to <code>sectors</code>.</li>
</ol>
<hr>
<p><strong>Reference:</strong></p>
<h4 id="INT-13h-AH-08h-Read-Drive-Parameters"><a href="#INT-13h-AH-08h-Read-Drive-Parameters" class="headerlink" title="INT 13h, AH = 08h: Read Drive Parameters"></a>INT 13h, AH = 08h: <a href="https://en.wikipedia.org/wiki/INT_13H" target="_blank" rel="noopener">Read Drive Parameters</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>08h</td>
</tr>
<tr>
<td>DL</td>
<td>drive index</td>
</tr>
<tr>
<td>ES:DI</td>
<td>set to 0000h:0000h to work around some buggy BIOS</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>CF</td>
<td>Set On Error, Clear If No Error</td>
</tr>
<tr>
<td>AH</td>
<td>Return Code</td>
</tr>
<tr>
<td>DL</td>
<td>number of hard disk drives</td>
</tr>
<tr>
<td>DH</td>
<td>logical last index of heads = number_of - 1 (because index starts with 0)</td>
</tr>
<tr>
<td>CX</td>
<td>[7:6][15:8] logical last index of cylinders = number_of - 1 (because index starts with 0)<br>[5:0] logical last index of sectors per track = number_of (because index starts with 1)</td>
</tr>
<tr>
<td>BL</td>
<td>drive type (only AT/PS2 floppies)</td>
</tr>
<tr>
<td>ES:DI</td>
<td>pointer to drive parameter table (only for floppies)</td>
</tr>
</tbody>
</table>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ok_load_setup:</span><br><span class="line">   ...</span><br><span class="line">	mov	$SYSSEG, %ax</span><br><span class="line">	mov	%ax, %es		# segment of 0x010000</span><br><span class="line">	call	read_it</span><br><span class="line">	call	kill_motor</span><br><span class="line">   ...</span><br></pre></td></tr></table></figure>
<p>Put <code>$SYSSEG</code> in <code>%es</code>, and call read_it.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">read_it:</span><br><span class="line">	mov	%es, %ax</span><br><span class="line">	test	$0x0fff, %ax</span><br><span class="line">die:	jne 	die			# es must be at 64kB boundary</span><br><span class="line">	xor 	%bx, %bx		# bx is starting address within segment</span><br></pre></td></tr></table></figure>
<ol>
<li><code>TEST</code> <code>0x0fff</code> and <code>0x1000</code>. <code>TEST</code> is bitwise <code>AND</code> and result of <code>TEST</code> is <code>0</code>, <code>ZF</code> is set to <code>1</code>. <a href="https://en.wikipedia.org/wiki/TEST_(x86_instruction" target="_blank" rel="noopener">ref</a>)</li>
<li><code>JNE</code> will jump when <code>ZF</code> is <code>0</code>, so it will continue executing the next instruction. <a href="https://en.wikibooks.org/wiki/X86_Assembly/Control_Flow#Jump_Instructions" target="_blank" rel="noopener">ref</a></li>
<li>Zero <code>%bx</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">rp_read:</span><br><span class="line">	mov 	%es, %ax</span><br><span class="line"> 	cmp 	$ENDSEG, %ax		# have we loaded all yet?</span><br><span class="line">	jb	ok1_read</span><br><span class="line">	ret</span><br></pre></td></tr></table></figure>
<ol>
<li>Put <code>%es</code> to <code>%ax</code> (<code>$SYSSEG</code>).</li>
<li>Compare <code>$ENGSEG</code>(<code>0x4000</code>) and <code>%ax</code> (<code>0x1000</code>).</li>
<li>In AT&amp;T syntax, <code>%ax</code> will subtract <code>$ENGSEG</code>. Result is <code>0xD000</code>. <code>SF</code> and <code>CF</code> will be set. <a href="https://en.wikibooks.org/wiki/X86_Assembly/Control_Flow#Comparison_Instructions" target="_blank" rel="noopener">ref</a></li>
<li>Because <code>jb</code> will jump when <code>CF</code> is 1, so jump to <code>ok1_read</code>. <a href="https://en.wikibooks.org/wiki/X86_Assembly/Control_Flow#Jump_Instructions" target="_blank" rel="noopener">ref</a></li>
<li>Otherwise, return to last callee.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sread:	.word 1+ SETUPLEN	# sectors read of current track</span><br><span class="line">...</span><br><span class="line">ok1_read:</span><br><span class="line">	#seg cs</span><br><span class="line">	mov	%cs:sectors+0, %ax</span><br><span class="line">	sub	sread, %ax</span><br><span class="line">	mov	%ax, %cx</span><br><span class="line">	shl	$9, %cx</span><br><span class="line">	add	%bx, %cx</span><br><span class="line">	jnc 	ok2_read</span><br><span class="line">	je 	ok2_read</span><br><span class="line">	xor 	%ax, %ax</span><br><span class="line">	sub 	%bx, %ax</span><br><span class="line">	shr 	$9, %ax</span><br></pre></td></tr></table></figure>
<ol>
<li>Move <code>sectors</code> to <code>%ax</code> and subtract <code>sread</code>. That is un-read sectors.</li>
<li>Calculate the total bytes of un-read sectors (512 bytes per sector)  to <code>%cx</code></li>
<li>If not greater or eqaul to $2^{16}$ (maximum register capacity), goto <code>ok2_read</code>.</li>
<li>Otherwise, count the maximum sectors can read (<code>%ax</code>).</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ok2_read:</span><br><span class="line">	call 	read_track</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">read_track:</span><br><span class="line">	push	%ax</span><br><span class="line">	push	%bx</span><br><span class="line">	push	%cx</span><br><span class="line">	push	%dx</span><br><span class="line">	mov	track, %dx</span><br><span class="line">	mov	sread, %cx</span><br><span class="line">	inc	%cx</span><br><span class="line">	mov	%dl, %ch</span><br><span class="line">	mov	head, %dx</span><br><span class="line">	mov	%dl, %dh</span><br><span class="line">	mov	$0, %dl</span><br><span class="line">	and	$0x0100, %dx</span><br><span class="line">	mov	$2, %ah</span><br><span class="line">	int	$0x13</span><br><span class="line">	jc	bad_rt</span><br><span class="line">	pop	%dx</span><br><span class="line">	pop	%cx</span><br><span class="line">	pop	%bx</span><br><span class="line">	pop	%ax</span><br><span class="line">	ret</span><br></pre></td></tr></table></figure>
<ol>
<li>Store all register.</li>
<li>In this time, we want to read drive 0 (floppy), from 0 cylinder, 0 track, from <code>1+SETUPLEN+1</code>‘th sector and read <code>%al</code> un-read sectors, 0 head to memory based on address <code>$SYSSEG:0x0000</code>. (i.e. load the system in memory)</li>
<li>If failed, <code>%cf</code> will be set, so that <code>jc    bad_rt</code> will jump to <code>bad_rt</code>.</li>
<li>Load all registers.</li>
</ol>
<p>At this very moment, we have already known the error may come from here. Because the system is located at <code>1 + 1 + 1 + SETUPLEN</code>, so we <strong>must</strong> change <code>sread</code> to <code>1 + 1 + SETUPLEN</code>.</p>
<hr>
<p><strong>Reference:</strong></p>
<h4 id="INT-13h-AH-02h-Read-Sectors-From-Drive-1"><a href="#INT-13h-AH-02h-Read-Sectors-From-Drive-1" class="headerlink" title="INT 13h, AH = 02h: Read Sectors From Drive"></a>INT 13h, AH = 02h: <a href="https://en.wikipedia.org/wiki/INT_13H" target="_blank" rel="noopener">Read Sectors From Drive</a></h4><p><strong>Parameter:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>AH</td>
<td>02h</td>
</tr>
<tr>
<td>AL</td>
<td>Sectors To Read Count</td>
</tr>
<tr>
<td>CH</td>
<td>Cylinder</td>
</tr>
<tr>
<td>CL</td>
<td>Sector</td>
</tr>
<tr>
<td>DH</td>
<td>Head</td>
</tr>
<tr>
<td>DL</td>
<td>Drive</td>
</tr>
<tr>
<td>ES:BX</td>
<td>Buffer Address Pointer</td>
</tr>
</tbody>
</table>
<p><strong>Results:</strong></p>
<table>
<thead>
<tr>
<th>Register</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>CF</td>
<td>Set On Error, Clear If No Error</td>
</tr>
<tr>
<td>AH</td>
<td>Return Code</td>
</tr>
<tr>
<td>AL</td>
<td>Actual Sectors Read Count</td>
</tr>
</tbody>
</table>
<hr>
<p>After change <code>sread</code> to <code>1 + 1 + SETUP</code>, it works!</p>
<p><img src="https://i.imgur.com/WGZwVkx.png" alt=""></p>
<hr>
<h2 id="Questions"><a href="#Questions" class="headerlink" title="Questions"></a>Questions</h2><ol>
<li>What’s the meaning of ljmp $BOOTSEG, $_start(boot/bootsect.s)? What is the memory address of the beginning of bootsect.s? What is the value of $_start? From above questions, could you please clearly explain how do you jump to the beginning of hello image?<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objdump -D -mi386 -Maddr16,data16 boot/bootsect.o</span><br></pre></td></tr></table></figure>
</li>
</ol>
<pre><code>![](https://i.imgur.com/lDWVVAr.png)
</code></pre><ol start="2">
<li><p>What’s the purpose of es register when the cpu is performing int $0x13 with AH=0x2h?</p>
<ul>
<li>base segment of memory address that put read sectors </li>
</ul>
</li>
<li><p>Please change the Hello program’s font color to another</p>
<ul>
<li>Change <code>%bl</code> register.</li>
</ul>
</li>
<li><p>If we would like to swap the position of hello and setup in the Image. Where do we need to modify in tools/build.sh and bootsect.s?</p>
<ul>
<li>The order of Image at <code>tools/build.sh</code></li>
<li>The starting sector want to read when perform int 13h with AH=02h.</li>
</ul>
</li>
<li><p>Please trace the SeaBIOS code. What are the first and the last instruction of the SeaBIOS? Where are they?</p>
<ul>
<li>First instruction: <code>reset_vector</code> @ <code>src/romlayout.S</code></li>
<li>Last instruction:<ul>
<li><code>call_boot_entry</code> @ <code>src/boot.c</code> in C</li>
<li><code>__farcall16</code> @ <code>src/romlayout.S</code> in asm</li>
</ul>
</li>
</ul>
</li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/03/12/Permutations/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/12/Permutations/" class="post-title-link" itemprop="url">Permutations</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-12 01:46:30" itemprop="dateCreated datePublished" datetime="2019-03-12T01:46:30+00:00">2019-03-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Permutations-46"><a href="#Permutations-46" class="headerlink" title="Permutations (#46)"></a><a href="https://leetcode.com/problems/permutations/" target="_blank" rel="noopener">Permutations (#46)</a></h2><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Given a collection of <strong>distinct</strong> integers, return all possible permutations.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Input: [1,2,3]</span><br><span class="line">Output:</span><br><span class="line">[</span><br><span class="line">  [1,2,3],</span><br><span class="line">  [1,3,2],</span><br><span class="line">  [2,1,3],</span><br><span class="line">  [2,3,1],</span><br><span class="line">  [3,1,2],</span><br><span class="line">  [3,2,1]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><ol>
<li>Recursive function (Backtracking).</li>
<li>Use <strong>Permutation Sequence</strong>.</li>
<li>Use <strong>Next Permutation</strong>.</li>
</ol>
<hr>
<h3 id="Recursive-Backtracking"><a href="#Recursive-Backtracking" class="headerlink" title="Recursive (Backtracking)"></a>Recursive (Backtracking)</h3><ol>
<li>If the incoming <code>permutation</code> length is equal to <code>Input</code> length, store it.</li>
<li>Otherwise, for every element  of <code>Input</code>:<br>2.1 If element is visted, continue<br>2.2 Otherwise, visit it and add to <code>permutation</code> and recursive call with updated <code>permutation</code>.<br>2.3 Pop the last element of <code>permutation</code> and un-visit the element.</li>
</ol>
<hr>
<h3 id="Use-Permutation-Sequence"><a href="#Use-Permutation-Sequence" class="headerlink" title="Use Permutation Sequence."></a>Use Permutation Sequence.</h3><ol>
<li>Sort the given <code>Input</code>.</li>
<li>for i in 1..$n!$:<br>2.1 Use the <a href="/2019/02/26/Permutation-Sequence/" title="Permutation-Sequence">Permutation-Sequence</a> with index <code>i</code> to generate the permutation.<br>2.2 Store it.</li>
</ol>
<hr>
<h3 id="Use-Next-Permutation"><a href="#Use-Next-Permutation" class="headerlink" title="Use Next Permutation."></a>Use Next Permutation.</h3><ol>
<li>Sort the given <code>Input</code> and put it to <code>seq</code>.</li>
<li>Store <code>seq</code></li>
<li>i = 1</li>
<li>while i is not equal to <code>n!</code>:<br>4.1 Use the <a href="/2019/02/22/Next-Permutation/" title="Next-Permutation">Next-Permutation</a> to generate the next permutation.<br>4.2 Store it.</li>
</ol>
<hr>
<h3 id="Code-Backtracking"><a href="#Code-Backtracking" class="headerlink" title="Code (Backtracking)"></a>Code (Backtracking)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">permute</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: List[List[int]]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        <span class="comment"># return [list(p) for p in permutations(nums)]</span></span><br><span class="line"></span><br><span class="line">        permute_list = []</span><br><span class="line">        visted = [<span class="keyword">False</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(nums))]</span><br><span class="line">        self.backtracking(permute_list, [], visted, nums)</span><br><span class="line">        <span class="keyword">return</span> permute_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtracking</span><span class="params">(self, permute_list, permutes, visted, nums)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(permutes) == len(nums):</span><br><span class="line">            permute_list.append(permutes.copy())</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(visted)):</span><br><span class="line">            <span class="keyword">if</span> visted[i]:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            visted[i] = <span class="keyword">True</span></span><br><span class="line">            permutes.append(nums[i])</span><br><span class="line">            self.backtracking(permute_list, permutes, visted, nums)</span><br><span class="line">            permutes.pop()</span><br><span class="line">            visted[i] = <span class="keyword">False</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/03/12/Binary-Tree-Paths/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/12/Binary-Tree-Paths/" class="post-title-link" itemprop="url">Binary_Tree_Paths</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-12 00:54:14" itemprop="dateCreated datePublished" datetime="2019-03-12T00:54:14+00:00">2019-03-12</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Binary-Tree-Paths-257"><a href="#Binary-Tree-Paths-257" class="headerlink" title="Binary Tree Paths (#257)"></a><a href="https://leetcode.com/problems/binary-tree-paths/" target="_blank" rel="noopener">Binary Tree Paths (#257)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Given a binary tree, return all root-to-leaf paths.</p>
<p>Note: A leaf is a node with no children.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line"></span><br><span class="line">   1</span><br><span class="line"> /   \</span><br><span class="line">2     3</span><br><span class="line"> \</span><br><span class="line">  5</span><br><span class="line"></span><br><span class="line">Output: [&quot;1-&gt;2-&gt;5&quot;, &quot;1-&gt;3&quot;]</span><br><span class="line"></span><br><span class="line">Explanation: All root-to-leaf paths are: 1-&gt;2-&gt;5, 1-&gt;3</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><p>Use the backtracking, again.</p>
<ol>
<li>If node is None, return.</li>
<li>Check the incoming node, if it is leaf, then build the path.</li>
<li>Otherwise, append the <strong>val</strong> to list, and do the recursive call with <strong>node.left</strong> and <strong>node.right</strong>.</li>
<li>Then, pop the last element of list, return to last callee.</li>
</ol>
<hr>
<h3 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input:</span><br><span class="line"></span><br><span class="line">   1</span><br><span class="line"> /   \</span><br><span class="line">2     3</span><br><span class="line"> \</span><br><span class="line">  5</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-0"></div>

<p>Append 1 to path, recursive call its left node.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>]</span><br><span class="line">paths = []</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-1"></div>

<p>Append 2 to path, recursive call its left node.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">paths = []</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-2"></div>

<p>Left node is leaf, return to parent.<br>Recursive call its right node.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">paths = []</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-3"></div>

<p>5 is leaf, store the path to paths and pop the last element of path.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">paths = [[<span class="string">"1-&gt;2-&gt;5"</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-4"></div>

<p>Return to 2, pop the last element of path.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>]</span><br><span class="line">paths = [[<span class="string">"1-&gt;2-&gt;5"</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-5"></div>

<p>Return to 1, recursive call its right node.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>]</span><br><span class="line">paths = [[<span class="string">"1-&gt;2-&gt;5"</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-6"></div>

<p>3 is leaf node, store the path in paths and pop the last element of path.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = [<span class="number">1</span>]</span><br><span class="line">paths = [[<span class="string">"1-&gt;2-&gt;5"</span>], [<span class="string">"1-&gt;3"</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<div id="graphviz-7"></div>

<p>Return to 1, pop the last element of path.<br>Finished.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path = []</span><br><span class="line">paths = [[<span class="string">"1-&gt;2-&gt;5"</span>], [<span class="string">"1-&gt;3"</span>]]</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"># class TreeNode(object):</span></span><br><span class="line"><span class="comment">#     def __init__(self, x):</span></span><br><span class="line"><span class="comment">#         self.val = x</span></span><br><span class="line"><span class="comment">#         self.left = None</span></span><br><span class="line"><span class="comment">#         self.right = None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">binaryTreePaths</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type root: TreeNode</span></span><br><span class="line"><span class="string">        :rtype: List[str]</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        paths = []</span><br><span class="line">        self.backtracking(paths, [], root)</span><br><span class="line">        <span class="keyword">return</span> paths</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtracking</span><span class="params">(self, paths, path, node)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> node <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        path.append(str(node.val))</span><br><span class="line">        <span class="keyword">if</span> self.isLeaf(node):</span><br><span class="line">            paths.append(<span class="string">"-&gt;"</span>.join(path))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.backtracking(paths, path, node.left)</span><br><span class="line">            self.backtracking(paths, path, node.right)</span><br><span class="line">        path.pop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">isLeaf</span><span class="params">(self, node)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> node.left <span class="keyword">is</span> <span class="keyword">None</span> <span class="keyword">and</span> node.right <span class="keyword">is</span> <span class="keyword">None</span></span><br></pre></td></tr></table></figure>
<p><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    "1" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script><textarea id="graphviz-1-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1->2
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->2 [style=invis];
        rankdir=LR;
    } 
    "2" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-1-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-1").append(element)  });</script><textarea id="graphviz-2-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1->2
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->2 [style=invis];
        rankdir=LR;
    } 

    "2" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-2-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-2").append(element)  });</script><textarea id="graphviz-3-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1->2
        2->5
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->2 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank3->5 [style=invis];
        rankdir=LR;
    }
    "5" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-3-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-3").append(element)  });</script><textarea id="graphviz-4-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1->2
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->2 [style=invis];
        rankdir=LR;
    } 
    "2" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-4-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-4").append(element)  });</script><textarea id="graphviz-5-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    }
    "1" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-5-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-5").append(element)  });</script><textarea id="graphviz-6-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        1->3
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->3 [style=invis];
        rankdir=LR;
    } 
    "3" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-6-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-6").append(element)  });</script><textarea id="graphviz-7-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->1 [style=invis];
        rankdir=LR;
    }
    "1" [shape=oval, style=filled, fillcolor="#72a8ff", pos="0,0!"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-7-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-7").append(element)  });</script></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/03/11/Letter-Combinations-of-a-Phone-Number/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/03/11/Letter-Combinations-of-a-Phone-Number/" class="post-title-link" itemprop="url">Letter_Combinations_of_a_Phone_Number</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-03-11 01:20:49" itemprop="dateCreated datePublished" datetime="2019-03-11T01:20:49+00:00">2019-03-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Letter-Combinations-of-a-Phone-Number-17"><a href="#Letter-Combinations-of-a-Phone-Number-17" class="headerlink" title="Letter Combinations of a Phone Number (#17)"></a><a href="https://leetcode.com/problems/letter-combinations-of-a-phone-number/" target="_blank" rel="noopener">Letter Combinations of a Phone Number (#17)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Given a string containing digits from <code>2-9</code> inclusive, return all possible letter combinations that the number could represent.</p>
<p>A mapping of digit to letters (just like on the telephone buttons) is given below. Note that 1 does not map to any letters.</p>
<p><img src="https://i.imgur.com/rmmhD3d.png" alt=""></p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;23&quot;</span><br><span class="line">Output: [&quot;ad&quot;, &quot;ae&quot;, &quot;af&quot;, &quot;bd&quot;, &quot;be&quot;, &quot;bf&quot;, &quot;cd&quot;, &quot;ce&quot;, &quot;cf&quot;].</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Recursive-function"><a href="#Recursive-function" class="headerlink" title="Recursive function"></a>Recursive function</h3><ul>
<li>Self called function</li>
<li>Need to define the terminated condition and return</li>
</ul>
<h3 id="DFS"><a href="#DFS" class="headerlink" title="DFS"></a>DFS</h3><ul>
<li>Recursive function</li>
<li>Only return when reached the boundary condition (e.g., array tail and tree leaf reached)</li>
</ul>
<hr>
<h3 id="Backtracking"><a href="#Backtracking" class="headerlink" title="Backtracking"></a>Backtracking</h3><ul>
<li>Similar to DFS, but when you get the result, you need to continue to get the next solution.</li>
<li>Useful trick to solve combination-related problem</li>
<li>When getting the satisfied result, need to <strong>backtracking</strong> to last caller.</li>
</ul>
<hr>
<h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><ol>
<li>Check the length of incoming combination. If it equals to the digits length, go to 2. Otherwise, goto 3.</li>
<li>Save the combination and return to its caller (i.e. goto 3.2).</li>
<li>Use the length of combination to access digit, iterate all mapping characters<br> 3.1 Push the character into combination and goto 1.<br> 3.2 Pop the last element of combination, and goto 3.</li>
</ol>
<hr>
<h2 id="Run"><a href="#Run" class="headerlink" title="Run"></a>Run</h2><hr>
<div id="graphviz-0"></div>

<hr>
<div id="graphviz-1"></div>

<hr>
<div id="graphviz-2"></div>

<hr>
<div id="graphviz-3"></div>

<hr>
<div id="graphviz-4"></div>

<hr>
<div id="graphviz-5"></div>

<hr>
<div id="graphviz-6"></div>

<hr>
<div id="graphviz-7"></div>

<hr>
<div id="graphviz-8"></div>

<hr>
<div id="graphviz-9"></div>

<hr>
<div id="graphviz-10"></div>

<hr>
<div id="graphviz-11"></div>

<hr>
<div id="graphviz-12"></div>

<hr>
<div id="graphviz-13"></div>

<hr>
<div id="graphviz-14"></div>

<hr>
<div id="graphviz-15"></div>

<hr>
<div id="graphviz-16"></div>

<hr>
<div id="graphviz-17"></div>

<hr>
<div id="graphviz-18"></div>

<hr>
<div id="graphviz-19"></div>

<hr>
<div id="graphviz-20"></div>

<hr>
<div id="graphviz-21"></div>

<hr>
<div id="graphviz-22"></div>

<hr>
<div id="graphviz-23"></div>

<hr>
<div id="graphviz-24"></div>

<hr>
<div id="graphviz-25"></div>

<hr>
<h2 id="Similar-question"><a href="#Similar-question" class="headerlink" title="Similar question"></a>Similar question</h2><ul>
<li>Combinations</li>
<li>Permutation</li>
<li>Subsets</li>
<li>N-Queens I</li>
<li>N-Queens II</li>
</ul>
<hr>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">letterCombinations</span><span class="params">(self, digits: str)</span> -&gt; List[str]:</span></span><br><span class="line">        num_dict = &#123;</span><br><span class="line">            <span class="string">"2"</span>: <span class="string">"abc"</span>,</span><br><span class="line">            <span class="string">"3"</span>: <span class="string">"def"</span>,</span><br><span class="line">            <span class="string">"4"</span>: <span class="string">"ghi"</span>,</span><br><span class="line">            <span class="string">"5"</span>: <span class="string">"jkl"</span>,</span><br><span class="line">            <span class="string">"6"</span>: <span class="string">"mno"</span>,</span><br><span class="line">            <span class="string">"7"</span>: <span class="string">"pqrs"</span>,</span><br><span class="line">            <span class="string">"8"</span>: <span class="string">"tuv"</span>,</span><br><span class="line">            <span class="string">"9"</span>: <span class="string">"wxyz"</span></span><br><span class="line">        &#125;</span><br><span class="line">        combinations = []</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> digits:</span><br><span class="line">            <span class="keyword">return</span> combinations</span><br><span class="line">        self.backtracking(combinations, [], digits, num_dict)</span><br><span class="line">        <span class="keyword">return</span> combinations</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">backtracking</span><span class="params">(self, combinations, candidate, digits, num_dict)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(candidate) == len(digits):</span><br><span class="line">            combinations.append(<span class="string">""</span>.join(candidate))</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        current_digit = digits[len(candidate)]</span><br><span class="line">        alphas = num_dict[current_digit]</span><br><span class="line">        <span class="keyword">for</span> alpha <span class="keyword">in</span> alphas:</span><br><span class="line">            candidate.append(alpha)</span><br><span class="line">            self.backtracking(combinations, candidate.copy(), digits,  num_dict)</span><br><span class="line">            candidate.pop()</span><br></pre></td></tr></table></figure>
<p><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    } 
    "null" [shape=oval, style=filled, fillcolor="#72a8ff"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script><textarea id="graphviz-1-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        null->a 
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }
    "a" [shape=oval, style=filled, fillcolor="#72a8ff"]

}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-1-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-1").append(element)  });</script><textarea id="graphviz-2-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->ad
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }    
    "ad" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-2-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-2").append(element)  });</script><textarea id="graphviz-3-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->ad
        ad->a
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    } 
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }                
    "a" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-3-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-3").append(element)  });</script><textarea id="graphviz-4-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->ae
    }
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae [style=invis];
        rankdir=LR;
    }   
    "ae" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-4-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-4").append(element)  });</script><textarea id="graphviz-5-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->ae
        ae->a
    }
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae [style=invis];
        rankdir=LR;
    }  
    "a" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-5-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-5").append(element)  });</script><textarea id="graphviz-6-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->af
    }
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af [style=invis];
        rankdir=LR;
    }  
    "af" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-6-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-6").append(element)  });</script><textarea id="graphviz-7-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->af
        af->a
    }
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af [style=invis];
        rankdir=LR;
    }  
    "a" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-7-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-7").append(element)  });</script><textarea id="graphviz-8-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        a->af
        af->a
    }
    subgraph current {
        edge [color=Blue]
        null->a
        a->null
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af [style=invis];
        rankdir=LR;
    }  
    "null" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-8-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-8").append(element)  });</script><textarea id="graphviz-9-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
    }
    subgraph current {
        edge [color=Blue]
        null->b
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af [style=invis];
        rankdir=LR;
    }   
    "b" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-9-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-9").append(element)  });</script><textarea id="graphviz-10-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->bd
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd [style=invis];
        rankdir=LR;
    } 
    "bd" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-10-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-10").append(element)  });</script><textarea id="graphviz-11-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->bd
        bd->b
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd [style=invis];
        rankdir=LR;
    } 
    "b" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-11-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-11").append(element)  });</script><textarea id="graphviz-12-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->be
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be [style=invis];
        rankdir=LR;
    } 
    "be" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-12-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-12").append(element)  });</script><textarea id="graphviz-13-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->be
        be->b
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be [style=invis];
        rankdir=LR;
    } 
    "b" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-13-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-13").append(element)  });</script><textarea id="graphviz-14-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->bf
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf [style=invis];
        rankdir=LR;
    } 
    "bf" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-14-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-14").append(element)  });</script><textarea id="graphviz-15-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->bf
        bf->b
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf [style=invis];
        rankdir=LR;
    } 
    "b" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-15-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-15").append(element)  });</script><textarea id="graphviz-16-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
    }
    subgraph current {
        edge [color=Blue]
        null->b
        b->null
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf [style=invis];
        rankdir=LR;
    } 
    "null" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-16-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-16").append(element)  });</script><textarea id="graphviz-17-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
    }
    subgraph current {
        edge [color=Blue]
        null->c
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf [style=invis];
        rankdir=LR;
    } 
    "c" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-17-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-17").append(element)  });</script><textarea id="graphviz-18-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->cd
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd [style=invis];
        rankdir=LR;
    } 
    "cd" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-18-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-18").append(element)  });</script><textarea id="graphviz-19-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->cd
        cd->c
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd [style=invis];
        rankdir=LR;
    } 
    "c" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-19-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-19").append(element)  });</script><textarea id="graphviz-20-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->ce
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }           
    "ce" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-20-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-20").append(element)  });</script><textarea id="graphviz-21-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->ce
        ce->c
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }            
    "c" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-21-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-21").append(element)  });</script><textarea id="graphviz-22-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
        c->ce
        ce->c
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->cf
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }          
    "cf" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-22-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-22").append(element)  });</script><textarea id="graphviz-23-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
        c->ce
        ce->c
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->cf
        cf->c
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }       
    "c" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-23-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-23").append(element)  });</script><textarea id="graphviz-24-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
        c->ce
        ce->c
        c->cf
        cf->c
    }
    subgraph current {
        edge [color=Blue]
        null->c
        c->null
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }          
    "c" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-24-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-24").append(element)  });</script><textarea id="graphviz-25-code" style="display: none">digraph hierarchy {
    node [color=Black,fontname=Courier,shape=oval] //All nodes will this shape and colour
    nodesep=1.0 // increases the separation between nodes
    rank1 [style=invisible]
    rank2 [style=invisible]
    rank3 [style=invisible]
    rank1 -> rank2 -> rank3 [color=white]
    subgraph return {
        edge [color=Gray, style=dashed] //All the lines look like this
        a->ad
        ad->a
        a->ae
        ae->a
        null->a
        a->af
        af->a
        a->null
        b->bd
        bd->b
        b->be
        be->b
        b->bf
        bf->b
        null->b
        b->null
        c->cd
        cd->c
        c->ce
        ce->c
        c->cf
        cf->c
        null->c
        c->null
    }
    subgraph current {
        edge [color=Blue]
    }
    {
        rank=same;
        rank1->null [style=invis];
        rankdir=LR;
    }  
    {
        rank=same;
        rank2->a->b->c [style=invis];
        rankdir=LR;
    }      
    {
        rank=same;
        rank3->ad->ae->af->bd->be->bf->cd->ce [style=invis];
        rankdir=LR;
    }              
    "null" [shape=oval, style=filled, fillcolor="#72a8ff"]
}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-25-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-25").append(element)  });</script></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/02/26/Permutation-Sequence/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/26/Permutation-Sequence/" class="post-title-link" itemprop="url">Permutation-Sequence</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-26 00:33:42" itemprop="dateCreated datePublished" datetime="2019-02-26T00:33:42+00:00">2019-02-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Permutation-Sequence-60"><a href="#Permutation-Sequence-60" class="headerlink" title="Permutation Sequence (#60)"></a><a href="https://leetcode.com/problems/permutation-sequence/" target="_blank" rel="noopener">Permutation Sequence (#60)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>The set [1,2,3,…,n] contains a total of n! unique permutations.</p>
<p>By listing and labeling all of the permutations in order, we get the following sequence for n = 3:</p>
<ol>
<li>“123”</li>
<li>“132”</li>
<li>“213”</li>
<li>“231”</li>
<li>“312”</li>
<li>“321”</li>
</ol>
<p>Given n and k, return the kth permutation sequence.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p>Example 1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n = 3, k = 3</span><br><span class="line">Output: &quot;213&quot;</span><br></pre></td></tr></table></figure></p>
<p>Example 2<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: n = 4, k = 9</span><br><span class="line">Output: &quot;2314&quot;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution)"></a><a href="https://leetcode.com/problems/permutation-sequence/discuss/22507/%22Explain-like-I&#39;m-five%22-Java-Solution-in-O(n" target="_blank" rel="noopener">Solution</a>)</h2><h3 id="Observation"><a href="#Observation" class="headerlink" title="Observation"></a>Observation</h3><p>Given n = 4 and k = 5.</p>
<p>Emumerate part of permutations:</p>
<ol>
<li>“1234”</li>
<li>“1243”</li>
<li>“1324”</li>
<li>“1342”</li>
<li>“1423”</li>
<li>“1432”</li>
<li>…</li>
</ol>
<p>Should return “1423”</p>
<hr>
<p>All permutations are consist of</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 + permutation([2, 3, 4]), size = 3!</span><br><span class="line">2 + permutation([1, 3, 4]), size = 3!</span><br><span class="line">3 + permutation([1, 2, 4]), size = 3!</span><br><span class="line">4 + permutation([1, 2, 3]), size = 3!</span><br></pre></td></tr></table></figure>
<p>5 is located at 1st group!<br>So the first number is <strong>1</strong>.</p>
<hr>
<p>How to determine the group index?<br>By <strong>division</strong>!</p>
<p>For convenient, convert k to zero base.<br>E.g., 5 - 1 = 4.</p>
<p><strong>Q</strong>: There are $n$ groups, and each group is $(n - 1)!$ size, what’s the group index of $k$?</p>
<p><strong>A</strong>: It’s $k / (n - 1)!$</p>
<p>E.g.<br>$4 / (4 - 1)! = 0$</p>
<hr>
<div style="color: #8a6d3b"><br>After determining the group number, the number is in <strong>ordered candidates</strong> at group index.<br></div>

<p>E.g.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidates = [1, 2, 3, 4]</span><br><span class="line">              0  1  2  3</span><br><span class="line"></span><br><span class="line">group index = 0</span><br></pre></td></tr></table></figure></p>
<p>Get the first number 1.</p>
<hr>
<p>How to determine rest of numbers?<br>Let’s look at new permutations.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 + permutation([3, 4]), size = 2!</span><br><span class="line">3 + permutation([1, 4]), size = 2!</span><br><span class="line">4 + permutation([2, 3]), size = 2!</span><br></pre></td></tr></table></figure>
<p>New k become $4 - 0 \times (4 - 1)! = 4$.<br>That is also equal to $4  \, \% \, (4 - 1)! = 4$.</p>
<div style="color: #8a6d3b"><br>- $\text{index} = \text{index} \, \% \, \lvert\text{candidates}\rvert!$<br>- $\text{candidates} = \text{candidates} \setminus {\text{selected number}}$<br></div>

<hr>
<p>Continue…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k = 4</span><br><span class="line">candidates = [2, 3, 4]</span><br></pre></td></tr></table></figure></p>
<p>Group index = $4 / (3 - 1)! = 2$<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidates = [2, 3, 4]</span><br><span class="line">              0  1  2</span><br><span class="line"></span><br><span class="line">group index = 2</span><br></pre></td></tr></table></figure></p>
<p>Select 4</p>
<p>new candidates = <code>[2, 3]</code><br>new k = $4 \% (3 - 1)! = 0$</p>
<hr>
<p>Continue…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k = 0</span><br><span class="line">candidates = [2, 3]</span><br></pre></td></tr></table></figure></p>
<p>Group index = $0 / (2 - 1)! = 0$<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidates = [2, 3]</span><br><span class="line">              0  1</span><br><span class="line"></span><br><span class="line">group index = 0</span><br></pre></td></tr></table></figure></p>
<p>Select 2</p>
<p>new candidates = <code>[3]</code><br>new k = $0 \% (2 - 1)! = 0$</p>
<hr>
<p>Finally…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">k = 0</span><br><span class="line">candidates = [3]</span><br></pre></td></tr></table></figure></p>
<p>Group index = $0 / (1 - 1)! = 0$<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">candidates = [3]</span><br><span class="line">              0</span><br><span class="line"></span><br><span class="line">group index = 0</span><br></pre></td></tr></table></figure></p>
<p>Select 3</p>
<hr>
<h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><ol>
<li>Find out which group k is located by division</li>
<li>Use the quotient to index the quotient</li>
<li>Update candidates, k as remainder</li>
<li>When candidates length is not zero, goto 1</li>
</ol>
<p>Time Complexity: $O(n)$<br>Space Complexity: $O(n)$</p>
<hr>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getPermutation</span><span class="params">(self, n, k)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type n: int</span></span><br><span class="line"><span class="string">        :type k: int</span></span><br><span class="line"><span class="string">        :rtype: str</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        factorial = [<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">            factorial.append(factorial[<span class="number">-1</span>] * i)</span><br><span class="line"></span><br><span class="line">        nums = list(range(<span class="number">1</span>, n + <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">        k -= <span class="number">1</span></span><br><span class="line">        s = [<span class="string">"0"</span> <span class="keyword">for</span> _ <span class="keyword">in</span> range(n)]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> reversed(range(n)):</span><br><span class="line">            index, k = divmod(k, factorial[i])</span><br><span class="line">            s[n - <span class="number">1</span> - i] = str(nums[index])</span><br><span class="line">            nums.pop(index)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span>.join(s)</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/02/22/Next-Permutation/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/22/Next-Permutation/" class="post-title-link" itemprop="url">Next-Permutation</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-22 19:24:20" itemprop="dateCreated datePublished" datetime="2019-02-22T19:24:20+00:00">2019-02-22</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Next-Permutation-31"><a href="#Next-Permutation-31" class="headerlink" title="Next Permutation (#31)"></a><a href="https://leetcode.com/problems/next-permutation/" target="_blank" rel="noopener">Next Permutation (#31)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Implement next permutation, which rearranges numbers into the lexicographically next greater permutation of numbers.</p>
<p>If such arrangement is not possible, it must rearrange it as the lowest possible order (ie, sorted in ascending order).</p>
<p>The replacement must be in-place and use only constant extra memory.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><p><code>1, 2, 3</code> $\rightarrow$ <code>1, 3, 2</code><br><code>3, 2 ,1</code> $\rightarrow$ <code>1, 2, 3</code><br><code>1, 1, 5</code> $\rightarrow$ <code>1, 5, 1</code></p>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Observation"><a href="#Observation" class="headerlink" title="Observation"></a>Observation</h3><p>What’s the pattern of these examples?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 2, 3  -&gt; 1, 3, 2</span><br><span class="line">      ^        ^</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 1, 5  -&gt; 1, 5, 1</span><br><span class="line">      ^        ^</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4, 1, 3, 2 -&gt; 4, 2, 1, 3</span><br><span class="line">      ^          ^</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2, 4, 1, 3 -&gt; 2, 4, 3, 1</span><br><span class="line">         ^          ^</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3, 4, 2, 1 -&gt; 4, 1, 2, 3</span><br><span class="line">   ^          ^</span><br></pre></td></tr></table></figure>
<div style="color: #8a6d3b"><br>It looks like the pointer is the index that is ready to “carry” to next index.<br></div>

<hr>
<p>However, how do we find the index that is carrying?<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 2, 3</span><br><span class="line">      &lt;-</span><br></pre></td></tr></table></figure></p>
<p>2 &lt; <span style="color: #D38B5D">3</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 1, 5</span><br><span class="line">      &lt;-</span><br></pre></td></tr></table></figure>
<p>1 &lt; <span style="color: #D38B5D">5</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4, 1, 3, 2</span><br><span class="line">      &lt;---</span><br></pre></td></tr></table></figure>
<p>1 &lt; <span style="color: #D38B5D">3</span> &gt; 2</p>
<hr>
<p>More examples…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2, 4, 1, 3</span><br><span class="line">         &lt;-</span><br></pre></td></tr></table></figure></p>
<p>1 &lt; <span style="color: #D38B5D">3</span></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3, 4, 2, 1</span><br><span class="line">   &lt;------</span><br></pre></td></tr></table></figure>
<p>3 &lt; <span style="color: #D38B5D">4</span> &gt; 2 &gt; 1</p>
<div style="color: #8a6d3b"><br>Find the index that is the peak of ascending order of array from reversed sequence.<br></div>

<hr>
<p>After find the index, how should we do carry?</p>
<ul>
<li>The replaced carry is <strong>more</strong> than its original.</li>
<li>The numbers before  carry is <strong>as small as possible</strong>.</li>
<li>The numbers after carry is <strong>fixed</strong>.</li>
</ul>
<p>In this time, we need the intermediate…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 2, 4, 3 -&gt; 1, 3, 4, 2 -&gt; 1, 3, 2, 4</span><br><span class="line">      ^</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3, 4, 2, 1 -&gt; 4, 3, 2, 1 -&gt; 4, 1, 2, 3</span><br><span class="line">   ^</span><br></pre></td></tr></table></figure>
<hr>
<p>We observe the original and intermediate first<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1, 2, 4, 3 -&gt; 1, 3, 4, 2</span><br><span class="line">      ^</span><br><span class="line">   o     x</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1, 3, 4, 2 -&gt; 1, 4, 3, 2</span><br><span class="line">      ^</span><br><span class="line">   o  x</span><br></pre></td></tr></table></figure>
<div style="color: #8a6d3b"><br>    <ul><br>        <li> From the point of view from carry, the sequence is descending order after the carry.</li><br>        <li> Find the number such that its value is <b>slightly larger</b> than carry is the <b>replacement</b>.</li><br>    </ul><br></div>

<hr>
<p>Confirm above…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1, 4, 3, 2 -&gt; 2, 4, 3, 1</span><br><span class="line">   ^</span><br><span class="line">o        x</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3, 4, 2, 1 -&gt; 4, 3, 2, 1</span><br><span class="line">   ^</span><br><span class="line">o  x</span><br></pre></td></tr></table></figure>
<div style="color: #8a6d3b"><br>After swapping, the sequence is guaranteed to have <b>descending order</b> from the viewpoint from carry. <b>Why?</b><br></div>

<p>One more thing to do…</p>
<p>We now look up the intermediate and the final<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1, 3, 4, 2 -&gt; 1, 3, 2, 4</span><br><span class="line">      &lt;--&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4, 3, 2, 1 -&gt; 4, 1, 2, 3</span><br><span class="line">   &lt;-----&gt;</span><br></pre></td></tr></table></figure>
<p> We want the numbers after the carry is <strong>as small as possible</strong>, and we have known the sequence is <strong>descending order</strong> after swapping…</p>
<p>Just to <strong>reverse</strong> the numbers after the carry!</p>
<hr>
<h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><ol>
<li>Find the index that is ready to carry.</li>
<li>Find the replaced number that is slightly larger than carry, and swap them.</li>
<li>Reverse the sequence after the carry.</li>
</ol>
<p>Time complexity: $O(n)$</p>
<p>Space complexity: $O(1)$</p>
<hr>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">nextPermutation</span><span class="params">(self, nums: <span class="string">'List[int]'</span>)</span> -&gt; '<span class="keyword">None</span>':</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        Do not return anything, modify nums in-place instead.</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        k = <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(nums) - <span class="number">1</span>, <span class="number">0</span>, <span class="number">-1</span>):</span><br><span class="line">            <span class="keyword">if</span> nums[i] &gt; nums[i - <span class="number">1</span>]:</span><br><span class="line">                k = i</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            k = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> k:</span><br><span class="line">            swap = k - <span class="number">1</span></span><br><span class="line">            pre = nums[swap]</span><br><span class="line"></span><br><span class="line">            pivot = k</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(k + <span class="number">1</span>, len(nums)):</span><br><span class="line">                <span class="keyword">if</span> nums[i] &lt;= pre:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pivot = i</span><br><span class="line"></span><br><span class="line">            nums[swap], nums[pivot] = nums[pivot], nums[swap]</span><br><span class="line"></span><br><span class="line">        nums[k:] = nums[k:][::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/02/17/Updating-a-Dictionary/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/17/Updating-a-Dictionary/" class="post-title-link" itemprop="url">Updating-a-Dictionary</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-17 17:34:44" itemprop="dateCreated datePublished" datetime="2019-02-17T17:34:44+00:00">2019-02-17</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Updating-a-Dictionary"><a href="#Updating-a-Dictionary" class="headerlink" title="Updating a Dictionary"></a><a href="https://uva.onlinejudge.org/index.php?option=com_onlinejudge&amp;Itemid=8&amp;page=show_problem&amp;problem=3948" target="_blank" rel="noopener">Updating a Dictionary</a></h1><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ol>
<li>Use the regex to parse key, value.</li>
<li>Save the parsed keys, values to real map.</li>
<li>Compare two maps.<ol>
<li>Use the overloading = operator to compare if two maps have no difference.</li>
<li>The intersection between current map’s keys and previous map’s keys is possible the edit one or equal one.</li>
<li>The difference between current map and intersection mentioned at 3.2 is the new one.</li>
<li>The difference between previous map and intersection mentioned at 3.2 is the delete one.</li>
<li>At last, filter the keys that corresponding value of current map and previous map are not the same. That is the edit one.</li>
</ol>
</li>
</ol>
<h2 id="What-I-learn"><a href="#What-I-learn" class="headerlink" title="What I learn"></a>What I learn</h2><ol>
<li>Use the regex lib at C++ for the first time.</li>
<li>Practice the C++ 11. E.g., copy_if, lambda.</li>
</ol>
<h2 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;regex&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iterator&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">regex <span class="title">key_regex</span><span class="params">(<span class="string">"([a-z]+)"</span>)</span></span>;</span><br><span class="line"><span class="function">regex <span class="title">value_regex</span><span class="params">(<span class="string">"([0-9]+)"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">parse2Dict</span><span class="params">(<span class="built_in">string</span> &amp;line, <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &amp;dict)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">auto</span> key_begin = sregex_iterator(line.begin(), line.end(), key_regex);</span><br><span class="line">    <span class="keyword">auto</span> key_end = sregex_iterator();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">auto</span> value_begin = sregex_iterator(line.begin(), line.end(), value_regex);</span><br><span class="line">    <span class="keyword">auto</span> value_end = sregex_iterator();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> k = key_begin, v = value_begin; k != key_end &amp;&amp; v != value_end; ++k, ++v)</span><br><span class="line">    &#123;</span><br><span class="line">        dict[k-&gt;str()] = v-&gt;str();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">(<span class="keyword">char</span> op, <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; &amp;target)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; target_vec(target.begin(), target.end());</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; op;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> k : target_vec)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; k;</span><br><span class="line">        <span class="keyword">if</span> (k != target_vec.back())</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">","</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">compareDict</span><span class="params">(<span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &amp;previous, <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; &amp;current)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (previous == current)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"No changes\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; previous_key;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> iter : previous)</span><br><span class="line">        &#123;</span><br><span class="line">            previous_key.insert(iter.first);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; current_key;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> iter : current)</span><br><span class="line">        &#123;</span><br><span class="line">            current_key.insert(iter.first);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// *</span></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; possible_star;</span><br><span class="line">        set_intersection(current_key.begin(), current_key.end(), previous_key.begin(), previous_key.end(), inserter(possible_star, possible_star.begin()));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// +</span></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; plus;</span><br><span class="line">        set_difference(current_key.begin(), current_key.end(), possible_star.begin(), possible_star.end(), inserter(plus, plus.begin()));</span><br><span class="line">        <span class="keyword">if</span> (plus.size())</span><br><span class="line">            output(<span class="string">'+'</span>, plus);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// -</span></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; minus;</span><br><span class="line">        set_difference(previous_key.begin(), previous_key.end(), possible_star.begin(), possible_star.end(), inserter(minus, minus.begin()));</span><br><span class="line">        <span class="keyword">if</span> (minus.size())</span><br><span class="line">            output(<span class="string">'-'</span>, minus);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// *</span></span><br><span class="line">        <span class="built_in">set</span>&lt;<span class="built_in">string</span>&gt; star;</span><br><span class="line">        copy_if(possible_star.begin(), possible_star.end(), inserter(star, star.begin()), [&amp;](<span class="built_in">string</span> k) &#123; <span class="keyword">return</span> current[k] != previous[k]; &#125;);</span><br><span class="line">        <span class="keyword">if</span> (star.size())</span><br><span class="line">            output(<span class="string">'*'</span>, star);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">string</span> line;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    getline(<span class="built_in">cin</span>, line);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        getline(<span class="built_in">cin</span>, line);</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; previous_map;</span><br><span class="line">        parse2Dict(line, previous_map);</span><br><span class="line"></span><br><span class="line">        getline(<span class="built_in">cin</span>, line);</span><br><span class="line">        <span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">string</span>&gt; current_map;</span><br><span class="line">        parse2Dict(line, current_map);</span><br><span class="line"></span><br><span class="line">        compareDict(previous_map, current_map);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/02/14/Search-in-Rotated-Sorted-Array/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/02/14/Search-in-Rotated-Sorted-Array/" class="post-title-link" itemprop="url">Search-in-Rotated-Sorted-Array</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-02-14 01:32:02" itemprop="dateCreated datePublished" datetime="2019-02-14T01:32:02+00:00">2019-02-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Search-in-Rotated-Sorted-Array-33"><a href="#Search-in-Rotated-Sorted-Array-33" class="headerlink" title="Search in Rotated Sorted Array (#33)"></a><a href="https://leetcode.com/problems/search-in-rotated-sorted-array/" target="_blank" rel="noopener">Search in Rotated Sorted Array (#33)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Suppose an array sorted in ascending order is rotated at some pivot unknown to you beforehand.</p>
<p>(i.e., <code>[0,1,2,4,5,6,7]</code> might become <code>[4,5,6,7,0,1,2]</code>).</p>
<p>You are given a target value to search. If found in the array return its index, otherwise return -1.</p>
<p>You may assume no duplicate exists in the array.</p>
<p>Your algorithm’s runtime complexity must be in the order of $O(log\,n)$.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [4,5,6,7,0,1,2], target = 0</span><br><span class="line">Output: 4</span><br></pre></td></tr></table></figure>
<h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: nums = [4,5,6,7,0,1,2], target = 3</span><br><span class="line">Output: -1</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Observation"><a href="#Observation" class="headerlink" title="Observation"></a>Observation</h3><p>If we know how far the array <em>rotated</em>, we could search the target like normal binary search.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nums = [4,5,6,7,0,1,2]</span><br><span class="line">target = 0</span><br></pre></td></tr></table></figure>
<p>For example, If we have known the previous array is rotated by 4, then</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[4,5,6,7,0,1,2]</span><br><span class="line"> 0 1 2 3 4 5 6</span><br><span class="line"></span><br><span class="line">real target&apos;s index is 4</span><br><span class="line"></span><br><span class="line">[0,1,2,4,5,6,7]</span><br><span class="line"> 0 1 2 3 4 5 6</span><br><span class="line"> </span><br><span class="line">original target&apos;s index is 0</span><br></pre></td></tr></table></figure>
<p>Is the real target’s index equal to original target’s index plus rotated num?</p>
<p>However ….<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nums = [6,7,0,1]</span><br><span class="line">target = 7</span><br></pre></td></tr></table></figure></p>
<p>Again, assert that we have already known the number of rotation is 2.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[6,7,0,1]</span><br><span class="line"> 0 1 2 3</span><br><span class="line"></span><br><span class="line">real target&apos;s index is 1</span><br><span class="line"></span><br><span class="line">[0,1,6,7]</span><br><span class="line"> 0 1 2 3 </span><br><span class="line"> </span><br><span class="line">original target&apos;s index is 3</span><br></pre></td></tr></table></figure>
<p>1 = 3 + 2</p>
<p>BUT, we could simply fix this by module length of nums, that is<br><strong>real target’s index == (original target’s index + rotated num) % length of nums</strong><br>Check our assumption…</p>
<ul>
<li>$4 = (0 + 4)\, \% \, 6$</li>
<li>$1 = (3 + 2)\, \% \, 4$</li>
</ul>
<p>At last, how could we know the number of rotation?</p>
<p>We just need to find the index of minimum of nums, and we could know the number of rotation is equal to it!</p>
<p>Verify it!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[4,5,6,7,0,1,2]</span><br><span class="line"> 0 1 2 3 4 5 6</span><br><span class="line">         ^</span><br><span class="line"></span><br><span class="line">[6,7,0,1]</span><br><span class="line"> 0 1 2 3</span><br><span class="line">     ^</span><br></pre></td></tr></table></figure>
<p>How? Please reference below link:<br><a href="/2019/01/31/Find-Minimum-in-Rotated-Sorted-Array/" title="Find-Minimum-in-Rotated-Sorted-Array">Find-Minimum-in-Rotated-Sorted-Array</a></p>
<hr>
<h3 id="Wrap-up"><a href="#Wrap-up" class="headerlink" title="Wrap up"></a>Wrap up</h3><p>The algorithm are …</p>
<ol>
<li>Find the index of <strong>minimum</strong> of nums, that is the rotated number.</li>
<li>Binary search the index of target in <strong>original array</strong>.</li>
<li>return the (index + rotated number) % length of array if index is not equal to -1 else -1</li>
</ol>
<p>Space complexity: $O(1)$<br>Time complexity: $O(log \, n)$</p>
<hr>
<h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search</span><span class="params">(self, nums, target)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :type target: int</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        shift = self.find_shift(nums)</span><br><span class="line">        <span class="comment"># print(shift)</span></span><br><span class="line">        faked_index = self.shift_binary_search(nums, shift, target)</span><br><span class="line">        <span class="keyword">return</span>  (faked_index + shift) % len(nums) <span class="keyword">if</span> faked_index != <span class="number">-1</span> <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">shift_binary_search</span><span class="params">(self, nums, shift, target)</span>:</span></span><br><span class="line">        l, h = <span class="number">0</span>, len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> l &lt;= h:</span><br><span class="line">            m = l + (h - l) // <span class="number">2</span></span><br><span class="line">            pivot = nums[(m + shift) % len(nums)]</span><br><span class="line">            <span class="keyword">if</span> pivot == target:</span><br><span class="line">                <span class="keyword">return</span> m</span><br><span class="line">            <span class="keyword">elif</span> pivot &gt; target:</span><br><span class="line">                h = m - <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                l = m + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">find_shift</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        l, h = <span class="number">0</span>, len(nums) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> l &lt; h:</span><br><span class="line">            m = l + (h - l) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> nums[m] &lt;= nums[h]:</span><br><span class="line">                h = m</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                l = m + <span class="number">1</span></span><br><span class="line">        <span class="keyword">return</span> l</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://titaneric.github.io/2019/01/31/Find-Minimum-in-Rotated-Sorted-Array/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Playground">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/01/31/Find-Minimum-in-Rotated-Sorted-Array/" class="post-title-link" itemprop="url">Find-Minimum-in-Rotated-Sorted-Array</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-01-31 01:35:32" itemprop="dateCreated datePublished" datetime="2019-01-31T01:35:32+00:00">2019-01-31</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-03-19 04:45:07" itemprop="dateModified" datetime="2019-03-19T04:45:07+00:00">2019-03-19</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Find-Minimum-in-Rotated-Sorted-Array-153"><a href="#Find-Minimum-in-Rotated-Sorted-Array-153" class="headerlink" title="Find Minimum in Rotated Sorted Array (#153)"></a><a href="https://leetcode.com/problems/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener">Find Minimum in Rotated Sorted Array (#153)</a></h1><h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Suppose an array sorted in ascending order is rotated at some pivot unknown to you beforehand.<br>(i.e.,  <code>[0,1,2,4,5,6,7]</code> might become  <code>[4,5,6,7,0,1,2]</code>).<br>Find the minimum element.<br>You may assume no duplicate exists in the array.</p>
<hr>
<h2 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h2><h3 id="Example-1"><a href="#Example-1" class="headerlink" title="Example 1"></a>Example 1</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [3, 4, 5, 1, 2]</span><br><span class="line">Output: 1</span><br></pre></td></tr></table></figure>
<h3 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input: [4, 5, 6, 7, 0, 1, 2]</span><br><span class="line">Output: 0</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><h3 id="Solution-I-Reference"><a href="#Solution-I-Reference" class="headerlink" title="Solution I (Reference)"></a>Solution I (<a href="https://leetcode.com/articles/find-minimum-in-rotated-sorted-array/" target="_blank" rel="noopener">Reference</a>)</h3><h4 id="Observation"><a href="#Observation" class="headerlink" title="Observation"></a>Observation</h4><p>If the sorted array is not rotated, the last element <strong><em>always</em></strong> larger than first element.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[2, 3, 4, 5, 6, 7]</span><br><span class="line"> ^              ^</span><br></pre></td></tr></table></figure>
<p>However, if the sorted array is rotated, we want to find the <code>Infection Point</code> (i.e. the point whose left element is maximum and right element is minimum).<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[4, 5, 6, 7, 2, 3]</span><br><span class="line">           ^</span><br></pre></td></tr></table></figure></p>
<p>Furthermore,</p>
<ul>
<li>All the elements to the left of inflection point &gt; first element of the array.</li>
<li>All the elements to the right of inflection point &lt; first element of the array.</li>
</ul>
<hr>
<h4 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h4><p><img src="https://i.imgur.com/goTfIbm.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[5, 1, 2, 4, 5]</span><br><span class="line"> l     m     r</span><br><span class="line"> &lt;-----</span><br><span class="line"></span><br><span class="line">[5, 1, 2, 4, 5]</span><br><span class="line"> l  r</span><br><span class="line"> m</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[4, 5, 6, 7, 2, 3]</span><br><span class="line"> l     m        r</span><br><span class="line">         -------&gt;</span><br><span class="line"></span><br><span class="line">[4, 5, 6, 7, 2, 3]</span><br><span class="line">          l  m  r</span><br></pre></td></tr></table></figure>
<p>Time Complexity: $O(log\,n)$<br>Space Complexity: $O(1)$</p>
<hr>
<h4 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">findMin</span><span class="params">(self, nums)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        :type nums: List[int]</span></span><br><span class="line"><span class="string">        :rtype: int</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> len(nums) == <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> nums[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        l, h = <span class="number">0</span>, len(nums) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> nums[h] &gt; nums[l]:</span><br><span class="line">            <span class="keyword">return</span> nums[l]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> l &lt;= h:</span><br><span class="line">            m = l + (h - l) // <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> nums[m] &gt; nums[m + <span class="number">1</span>]:</span><br><span class="line">                <span class="keyword">return</span> nums[m + <span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> nums[m - <span class="number">1</span>] &gt; nums[m]:</span><br><span class="line">                <span class="keyword">return</span> nums[m]</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> nums[m] &gt; nums[<span class="number">0</span>]:</span><br><span class="line">                l = m + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                h = m - <span class="number">1</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Eric Huang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">11</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric Huang</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v6.7.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=6.7.0"></script>

  <script src="/js/src/motion.js?v=6.7.0"></script>



  
  


  <script src="/js/src/schemes/muse.js?v=6.7.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.7.0"></script>



  




  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: "AMS"
      }
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
      for (i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
  overflow: auto hidden;
}
</style>

    
  


  

  

  

  

  

  

  

  

</body>
</html>
